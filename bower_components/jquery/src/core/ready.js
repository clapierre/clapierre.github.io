define(["../core","../core/init","../deferred"],function(c){var d;c.fn.ready=function(e){c.ready.promise().done(e);return this};c.extend({isReady:false,readyWait:1,holdReady:function(e){if(e){c.readyWait++}else{c.ready(true)}},ready:function(e){if(e===true?--c.readyWait:c.isReady){return}if(!document.body){return setTimeout(c.ready)}c.isReady=true;if(e!==true&&--c.readyWait>0){return}d.resolveWith(document,[c]);if(c.fn.triggerHandler){c(document).triggerHandler("ready");c(document).off("ready")}}});function b(){if(document.addEventListener){document.removeEventListener("DOMContentLoaded",a,false);window.removeEventListener("load",a,false)}else{document.detachEvent("onreadystatechange",a);window.detachEvent("onload",a)}}function a(){if(document.addEventListener||event.type==="load"||document.readyState==="complete"){b();c.ready()}}c.ready.promise=function(i){if(!d){d=c.Deferred();if(document.readyState==="complete"){setTimeout(c.ready)}else{if(document.addEventListener){document.addEventListener("DOMContentLoaded",a,false);window.addEventListener("load",a,false)}else{document.attachEvent("onreadystatechange",a);window.attachEvent("onload",a);var h=false;try{h=window.frameElement==null&&document.documentElement}catch(g){}if(h&&h.doScroll){(function f(){if(!c.isReady){try{h.doScroll("left")}catch(j){return setTimeout(f,50)}b();c.ready()}})()}}}}return d.promise(i)}});