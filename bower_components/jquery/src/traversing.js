define(["./core","./traversing/var/rneedsContext","./core/init","./traversing/findFilter","./selector"],function(d,e){var c=/^(?:parents|prev(?:Until|All))/,a={children:true,contents:true,next:true,prev:true};d.extend({dir:function(h,g,j){var f=[],i=h[g];while(i&&i.nodeType!==9&&(j===undefined||i.nodeType!==1||!d(i).is(j))){if(i.nodeType===1){f.push(i)}i=i[g]}return f},sibling:function(h,g){var f=[];for(;h;h=h.nextSibling){if(h.nodeType===1&&h!==g){f.push(h)}}return f}});d.fn.extend({has:function(j){var h,g=d(j,this),f=g.length;return this.filter(function(){for(h=0;h<f;h++){if(d.contains(this,g[h])){return true}}})},closest:function(k,j){var m,h=0,g=this.length,f=[],n=e.test(k)||typeof k!=="string"?d(k,j||this.context):0;for(;h<g;h++){for(m=this[h];m&&m!==j;m=m.parentNode){if(m.nodeType<11&&(n?n.index(m)>-1:m.nodeType===1&&d.find.matchesSelector(m,k))){f.push(m);break}}}return this.pushStack(f.length>1?d.unique(f):f)},index:function(f){if(!f){return(this[0]&&this[0].parentNode)?this.first().prevAll().length:-1}if(typeof f==="string"){return d.inArray(this[0],d(f))}return d.inArray(f.jquery?f[0]:f,this)},add:function(f,g){return this.pushStack(d.unique(d.merge(this.get(),d(f,g))))},addBack:function(f){return this.add(f==null?this.prevObject:this.prevObject.filter(f))}});function b(g,f){do{g=g[f]}while(g&&g.nodeType!==1);return g}d.each({parent:function(g){var f=g.parentNode;return f&&f.nodeType!==11?f:null},parents:function(f){return d.dir(f,"parentNode")},parentsUntil:function(g,f,h){return d.dir(g,"parentNode",h)},next:function(f){return b(f,"nextSibling")},prev:function(f){return b(f,"previousSibling")},nextAll:function(f){return d.dir(f,"nextSibling")},prevAll:function(f){return d.dir(f,"previousSibling")},nextUntil:function(g,f,h){return d.dir(g,"nextSibling",h)},prevUntil:function(g,f,h){return d.dir(g,"previousSibling",h)},siblings:function(f){return d.sibling((f.parentNode||{}).firstChild,f)},children:function(f){return d.sibling(f.firstChild)},contents:function(f){return d.nodeName(f,"iframe")?f.contentDocument||f.contentWindow.document:d.merge([],f.childNodes)}},function(f,g){d.fn[f]=function(j,h){var i=d.map(this,g,j);if(f.slice(-5)!=="Until"){h=j}if(h&&typeof h==="string"){i=d.filter(h,i)}if(this.length>1){if(!a[f]){i=d.unique(i)}if(c.test(f)){i=i.reverse()}}return this.pushStack(i)}});return d});