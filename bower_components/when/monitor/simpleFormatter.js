(function(a){a(function(){var c;try{throw new Error()}catch(b){c=!!b.stack}return function(h,f,l,g){return function j(p){var o,n;n={reason:p.reason,message:p.reason&&p.reason.toString()};if(c){o=p.reason&&p.reason.stack;if(!o){o=p.rejectedAt&&p.rejectedAt.stack}var m=i(p);n.stack=d(p.createdAt.stack,m,o)}return n};function i(n){var m=[];n=n.parent;while(n){m.push(k(n));n=n.parent}return m}function k(m){return h(e(m.createdAt.stack).slice(1))}function d(o,m,n){o=h(e(o)).slice(1);n=h(e(n));return m.reduce(function(p,q,r){return r?p.concat(g,q):p.concat(q)},[f]).concat(l,n)}function e(m){return m?m.split("\n"):[]}}})}(typeof define==="function"&&define.amd?define:function(a){module.exports=a()}));