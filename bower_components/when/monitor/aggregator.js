(function(a){a(function(){return function b(e){var f,c;function i(j){if(!(this instanceof i)){return new i(j)}var l;try{throw new Error()}catch(k){l=k}this.key=c++;f[this.key]=this;this.parent=j;this.timestamp=+(new Date());this.createdAt=l}i.prototype={observed:function(){if(this.key in f){delete f[this.key];d()}return new i(this)},fulfilled:function(){if(this.key in f){delete f[this.key];d()}},rejected:function(l){var k;if(this.key in f){try{throw new Error(l&&l.message||l)}catch(j){k=j}this.reason=l;this.rejectedAt=k;d()}}};h();return g({publish:g});function g(j){j.PromiseStatus=i;j.reportUnhandled=d;j.resetUnhandled=h;return j}function d(){return e(f)}function h(){c=0;f={}}}})}(typeof define==="function"&&define.amd?define:function(a){module.exports=a()}));