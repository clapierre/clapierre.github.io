(function(a){a(function(c){var f,j,i,h,e;f=c("./when");j=f.promise;i={all:g,map:b};e={}.hasOwnProperty;h=Object.keys?function(l,k){Object.keys(l).forEach(function(m){k(l[m],m)})}:function(l,k){for(var m in l){if(e.call(l,m)){k(l[m],m)}}};return i;function g(k){return b(k,d)}function b(k,l){return f(k,function(m){return j(n);function n(s,r,q){var p,o;p={};o=0;h(m,function(u,t){++o;f(u,l).then(function(v){p[t]=v;if(!--o){s(p)}},r,q)});if(!o){s(p)}}})}function d(k){return k}})})(typeof define==="function"&&define.amd?define:function(a){module.exports=a(require)});