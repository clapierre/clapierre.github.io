(function(a){a(function(f){var j,m,i,l,k;j=f("../when");m=[].slice;l=f;try{k=l("vertx").setTimer;i=function(q,e){return k(e,q)}}catch(h){i=setTimeout}return{apply:n,call:p,lift:d,bind:d,createCallback:b,bindCallback:g,liftCallback:o};function n(q,e){return c(q,this,e)}function c(r,e,q){return j.all(q||[]).then(function(s){var t=j.defer();var u=b(t.resolver);r.apply(e,s.concat(u));return t.promise})}function p(e){return c(e,this,m.call(arguments,1))}function d(q){var e=m.call(arguments,1);return function(){return c(q,this,e.concat(m.call(arguments)))}}function b(e){return function(q,r){if(q){e.reject(q)}else{if(arguments.length>2){e.resolve(m.call(arguments,1))}else{e.resolve(r)}}}}function g(r,s){r=j(r);if(s){r.then(q,e)}return r;function q(t){e(null,t)}function e(t,u){i(function(){s(t,u)},0)}}function o(e){return function(q){return g(q,e)}}})})(typeof define==="function"&&define.amd?define:function(a){module.exports=a(require)});