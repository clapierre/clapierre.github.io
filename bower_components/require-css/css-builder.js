define(["require","./normalize"],function(c,i){var k={};var o=!!process.platform.match(/^win/);function l(t){if(q.optimizeCss=="none"){return t}if(typeof process!=="undefined"&&process.versions&&!!process.versions.node&&require.nodeRequire){try{var w=require.nodeRequire("csso")}catch(v){console.log('Compression module not installed. Use "npm install csso -g" to enable.');return t}var u=t.length;try{t=w.justDoIt(t)}catch(v){console.log("Compression failed due to a CSS syntax error.");return t}console.log("Compressed CSS output to "+Math.round(t.length/u*100)+"%.");return t}console.log("Compression not supported outside of nodejs environments.");return t}function r(z){if(typeof process!=="undefined"&&process.versions&&!!process.versions.node&&require.nodeRequire){var u=require.nodeRequire("fs");var x=u.readFileSync(z,"utf8");if(x.indexOf("\uFEFF")===0){return x.substring(1)}return x}else{var x=new java.io.File(z),t=java.lang.System.getProperty("line.separator"),w=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(x),"utf-8")),y,v;try{y=new java.lang.StringBuffer();v=w.readLine();if(v&&v.length()&&v.charAt(0)===65279){v=v.substring(1)}y.append(v);while((v=w.readLine())!==null){y.append(t).append(v)}return String(y.toString())}finally{w.close()}}}function f(x,w){if(typeof process!=="undefined"&&process.versions&&!!process.versions.node&&require.nodeRequire){var t=require.nodeRequire("fs");t.writeFileSync(x,w,"utf8")}else{var v=new java.lang.String(w);var u=new java.io.BufferedWriter(new java.io.OutputStreamWriter(new java.io.FileOutputStream(x),"utf-8"));try{u.write(v,0,v.length());u.flush()}finally{u.close()}}}function g(t){return t.replace(/(["'\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")}var b=/@import\s*(url)?\s*(('([^']*)'|"([^"]*)")|\(('([^']*)'|"([^"]*)"|([^\)]*))\))\s*;?/g;var a=/^([^\:\/]+:\/)?\//;var s="define('@writecss', function() {return function writeCss(c) {var d=document,a='appendChild',i='styleSheet',s=d.createElement('style');s.type='text/css';d.getElementsByTagName('head')[0][a](s);s[i]?s[i].cssText=c:s[a](d.createTextNode(c));};});";var e;var n=c.toUrl("base_url").split("/");n[n.length-1]="";var d=n.join("/");var h=0;var q;var p=true;var m=[];var j={};k.load=function(v,w,y,x){q=q||x;if(!e){e=path.resolve(q.dir||path.dirname(q.out),q.siteRoot||".")+"/";if(o){e=e.replace(/\\/g,"/")}}if(v.match(a)){return y()}var u=w.toUrl(v+".css");if(o){u=u.replace(/\\/g,"/")}var t=u;if(t.indexOf(d)<0){var z=w.toUrl(q.appDir);if(o){z=z.replace(/\\/g,"/")}if(t.indexOf(z)==0){t=e+t.substring(z.length)}}j[v]=i(r(u),t,e);y()};k.normalize=function(u,t){if(u.substr(u.length-4,4)==".css"){u=u.substr(0,u.length-4)}return t(u)};k.write=function(x,t,v,y){var w;if(t.match(a)){return}m.push(j[t]);if(!global._requirejsCssData){global._requirejsCssData={usedBy:{css:true},css:""}}else{global._requirejsCssData.usedBy.css=true}if(q.buildCSS!=false){var u=j[t];if(q.writeCSSModule&&u){if(p){p=false;v(s)}w='define(["@writecss"], function(writeCss){\n writeCss("'+g(l(u))+'");\n})'}else{w="define(function(){})"}v.asModule(x+"!"+t,w)}};k.onLayerEnd=function(v,x){if(q.separateCSS&&q.IESelectorLimit){throw"RequireCSS: separateCSS option is not compatible with ensuring the IE selector limit"}if(q.separateCSS){var y=x.path.replace(/(\.js)?$/,".css");console.log("Writing CSS! file: "+y+"\n");var u=m.join("");process.nextTick(function(){if(global._requirejsCssData){u=global._requirejsCssData.css=u+global._requirejsCssData.css;delete global._requirejsCssData.usedBy.css;if(Object.keys(global._requirejsCssData.usedBy).length===0){delete global._requirejsCssData}}f(y,l(u))})}else{if(q.buildCSS!=false&&q.writeCSSModule!=true){var w=q.IESelectorLimit?m:[m.join("")];for(var t=0;t<w.length;t++){if(w[t]==""){return}v("(function(c){var d=document,a='appendChild',i='styleSheet',s=d.createElement('style');s.type='text/css';d.getElementsByTagName('head')[0][a](s);s[i]?s[i].cssText=c:s[a](d.createTextNode(c));})\n('"+g(l(w[t]))+"');\n")}}}m=[];p=true};return k});