define(function(){var f=/([^:])\/+/g;var b=function(j){return j.replace(f,"$1/")};var c=/[^\:\/]*:\/\/([^\/])*/;var e=/^(\/|data:)/;function h(m,n,l){if(m.match(e)||m.match(c)){return m}m=b(m);var k=l.match(c);var j=n.match(c);if(j&&(!k||k[1]!=j[1]||k[2]!=j[2])){return a(m,n)}else{return d(a(m,n),l)}}function a(l,m){if(l.substr(0,2)=="./"){l=l.substr(2)}if(l.match(e)||l.match(c)){return l}var k=m.split("/");var j=l.split("/");k.pop();while(curPart=j.shift()){if(curPart==".."){k.pop()}else{k.push(curPart)}}return k.join("/")}function d(l,m){var k=m.split("/");k.pop();m=k.join("/")+"/";i=0;while(m.substr(i,1)==l.substr(i,1)){i++}while(m.substr(i,1)!="/"){i--}m=m.substr(i+1);l=l.substr(i+1);k=m.split("/");var j=l.split("/");out="";while(k.shift()){out+="../"}while(curPart=j.shift()){out+=curPart+"/"}return out.substr(0,out.length-1)}var g=function(n,p,l){p=b(p);l=b(l);var q=/@import\s*("([^"]*)"|'([^']*)')|url\s*\((?!#)\s*(\s*"([^"]*)"|'([^']*)'|[^\)]*\s*)\s*\)/ig;var j,k,n;while(j=q.exec(n)){k=j[3]||j[2]||j[5]||j[6]||j[4];var o;o=h(k,p,l);var m=j[5]||j[6]?1:0;n=n.substr(0,q.lastIndex-k.length-m-1)+o+n.substr(q.lastIndex-m-1);q.lastIndex=q.lastIndex+(o.length-k.length)}return n};g.convertURIBase=h;g.absoluteURI=a;g.relativeURI=d;return g});