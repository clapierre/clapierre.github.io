"use strict";var MemoryStore=require("./store/memory"),utils=require("./object-utils");function Collector(a){a=a||{};this.store=a.store||new MemoryStore()}Collector.prototype={add:function(b){var a=this.store;Object.keys(b).forEach(function(c){var d=b[c];if(a.hasKey(c)){a.setObject(c,utils.mergeFileCoverage(d,a.getObject(c)))}else{a.setObject(c,d)}})},files:function(){return this.store.keys()},fileCoverageFor:function(b){var a=this.store.getObject(b);utils.addDerivedInfoForFile(a);return a},getFinalCoverage:function(){var a={},b=this;this.files().forEach(function(c){a[c]=b.fileCoverageFor(c)});return a},dispose:function(){this.store.dispose()}};module.exports=Collector;