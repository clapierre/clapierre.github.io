function InsertionText(b,a){this.text=b;this.origLength=b.length;this.offsets=[];this.consumeBlanks=a;this.startPos=this.findFirstNonBlank();this.endPos=this.findLastNonBlank()}var WHITE_RE=/[ \f\n\r\t\v\u00A0\u2028\u2029]/;InsertionText.prototype={findFirstNonBlank:function(){var d=-1,c=this.text,a=c.length,b;for(b=0;b<a;b+=1){if(!c.charAt(b).match(WHITE_RE)){d=b;break}}return d},findLastNonBlank:function(){var c=this.text,a=c.length,d=c.length+1,b;for(b=a-1;b>=0;b-=1){if(!c.charAt(b).match(WHITE_RE)){d=b;break}}return d},originalLength:function(){return this.origLength},insertAt:function(d,h,c,e){e=typeof e==="undefined"?this.consumeBlanks:e;d=d>this.originalLength()?this.originalLength():d;d=d<0?0:d;if(e){if(d<=this.startPos){d=0}if(d>this.endPos){d=this.origLength}}var a=h.length,g=this.findOffset(d,a,c),b=d+g,f=this.text;this.text=f.substring(0,b)+h+f.substring(b);return this},findOffset:function(g,a,b){var e=this.offsets,d,f=0,c;for(c=0;c<e.length;c+=1){d=e[c];if(d.pos<g||(d.pos===g&&!b)){f+=d.len}if(d.pos>=g){break}}if(d&&d.pos===g){d.len+=a}else{e.splice(c,0,{pos:g,len:a})}return f},wrap:function(c,e,b,a,d){this.insertAt(c,e,true,d);this.insertAt(b,a,false,d);return this},wrapLine:function(b,a){this.wrap(0,b,this.originalLength(),a)},toString:function(){return this.text}};module.exports=InsertionText;