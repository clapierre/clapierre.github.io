var async=require("async"),fileset=require("fileset"),fs=require("fs"),path=require("path"),seq=0;function filesFor(c,h){if(!h&&typeof c==="function"){h=c;c=null}c=c||{};var b=c.root,d=c.includes,g=c.excludes,a=c.realpath,f=c.relative,e;b=b||process.cwd();d=d&&Array.isArray(d)?d:["**/*.js"];g=g&&Array.isArray(g)?g:["**/node_modules/**"];e={cwd:b,nodir:true};seq+=1;e["x"+seq+new Date().getTime()]=true;fileset(d.join(" "),g.join(" "),e,function(j,i){if(j){return h(j)}if(f){return h(j,i)}if(!a){i=i.map(function(l){return path.resolve(b,l)});return h(j,i)}var k=module.constructor._realpathCache||{};async.map(i,function(m,l){fs.realpath(path.resolve(b,m),k,l)},h)})}function matcherFor(a,b){if(!b&&typeof a==="function"){b=a;a=null}a=a||{};a.relative=false;a.realpath=true;filesFor(a,function(f,e){var d={},c;if(f){return b(f)}e.forEach(function(g){d[g]=true});c=function(g){return d[g]};c.files=Object.keys(d);return b(null,c)})}module.exports={filesFor:filesFor,matcherFor:matcherFor};