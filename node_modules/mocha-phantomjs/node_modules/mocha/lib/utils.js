function ignored(e){return!~ignore.indexOf(e)}function highlight(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\/\/(.*)/gm,'<span class="comment">//$1</span>').replace(/('.*?')/gm,'<span class="string">$1</span>').replace(/(\d+\.\d+)/gm,'<span class="number">$1</span>').replace(/(\d+)/gm,'<span class="number">$1</span>').replace(/\bnew[ \t]+(\w+)/gm,'<span class="keyword">new</span> <span class="init">$1</span>').replace(/\b(function|new|throw|return|var|if|else)\b/gm,'<span class="keyword">$1</span>')}var fs=require("fs"),path=require("path"),join=path.join,debug=require("debug")("mocha:watch"),ignore=["node_modules",".git"];exports.escape=function(e){return String(e).replace(/&/g,"&").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},exports.forEach=function(e,r,n){for(var t=0,a=e.length;a>t;t++)r.call(n,e[t],t)},exports.map=function(e,r,n){for(var t=[],a=0,c=e.length;c>a;a++)t.push(r.call(n,e[a],a));return t},exports.indexOf=function(e,r,n){for(var t=n||0,a=e.length;a>t;t++)if(e[t]===r)return t;return-1},exports.reduce=function(e,r,n){for(var t=n,a=0,c=e.length;c>a;a++)t=r(t,e[a],a,e);return t},exports.filter=function(e,r){for(var n=[],t=0,a=e.length;a>t;t++){var c=e[t];r(c,t,e)&&n.push(c)}return n},exports.keys=Object.keys||function(e){var r=[],n=Object.prototype.hasOwnProperty;for(var t in e)n.call(e,t)&&r.push(t);return r},exports.watch=function(e,r){var n={interval:100};e.forEach(function(e){debug("file %s",e),fs.watchFile(e,n,function(n,t){t.mtime<n.mtime&&r(e)})})},exports.files=function(e,r){return r=r||[],fs.readdirSync(e).filter(ignored).forEach(function(n){n=join(e,n),fs.statSync(n).isDirectory()?exports.files(n,r):n.match(/\.(js|coffee|litcoffee|coffee.md)$/)&&r.push(n)}),r},exports.slug=function(e){return e.toLowerCase().replace(/ +/g,"-").replace(/[^-\w]/g,"")},exports.clean=function(e){e=e.replace(/\r\n?|[\n\u2028\u2029]/g,"\n").replace(/^\uFEFF/,"").replace(/^function *\(.*\) *{/,"").replace(/\s+\}$/,"");var r=e.match(/^\n?( *)/)[1].length,n=e.match(/^\n?(\t*)/)[1].length,t=new RegExp("^\n?"+(n?"	":" ")+"{"+(n?n:r)+"}","gm");return e=e.replace(t,""),exports.trim(e)},exports.escapeRegexp=function(e){return e.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")},exports.trim=function(e){return e.replace(/^\s+|\s+$/g,"")},exports.parseQuery=function(e){return exports.reduce(e.replace("?","").split("&"),function(e,r){var n=r.indexOf("="),t=r.slice(0,n),a=r.slice(++n);return e[t]=decodeURIComponent(a),e},{})},exports.highlightTags=function(e){for(var r=document.getElementsByTagName(e),n=0,t=r.length;t>n;++n)r[n].innerHTML=highlight(r[n].innerHTML)};