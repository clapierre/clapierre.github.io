function NyanCat(t){Base.call(this,t);{var r=this,i=(this.stats,.75*Base.window.width|0),o=(this.rainbowColors=r.generateColors(),this.colorIndex=0,this.numberOfLines=4,this.trajectories=[[],[],[],[]],this.nyanCatWidth=11);this.trajectoryWidthMax=i-o,this.scoreboardWidth=5,this.tick=0}t.on("start",function(){Base.cursor.hide(),r.draw()}),t.on("pending",function(){r.draw()}),t.on("pass",function(){r.draw()}),t.on("fail",function(){r.draw()}),t.on("end",function(){Base.cursor.show();for(var t=0;t<r.numberOfLines;t++)write("\n");r.epilogue()})}function write(t){process.stdout.write(t)}var Base=require("./base"),color=Base.color;exports=module.exports=NyanCat,NyanCat.prototype.draw=function(){this.appendRainbow(),this.drawScoreboard(),this.drawRainbow(),this.drawNyanCat(),this.tick=!this.tick},NyanCat.prototype.drawScoreboard=function(){function t(t,r){write(" "),write("["+t+"m"+r+"[0m"),write("\n")}var r=this.stats,i=Base.colors;t(i.green,r.passes),t(i.fail,r.failures),t(i.pending,r.pending),write("\n"),this.cursorUp(this.numberOfLines)},NyanCat.prototype.appendRainbow=function(){for(var t=this.tick?"_":"-",r=this.rainbowify(t),i=0;i<this.numberOfLines;i++){var o=this.trajectories[i];o.length>=this.trajectoryWidthMax&&o.shift(),o.push(r)}},NyanCat.prototype.drawRainbow=function(){var t=this;this.trajectories.forEach(function(r){write("["+t.scoreboardWidth+"C"),write(r.join("")),write("\n")}),this.cursorUp(this.numberOfLines)},NyanCat.prototype.drawNyanCat=function(){var t=this,r=this.scoreboardWidth+this.trajectories[0].length,i="["+r+"C",o="";write(i),write("_,------,"),write("\n"),write(i),o=t.tick?"  ":"   ",write("_|"+o+"/\\_/\\ "),write("\n"),write(i),o=t.tick?"_":"__";var n=t.tick?"~":"^";write(n+"|"+o+this.face()+" "),write("\n"),write(i),o=t.tick?" ":"  ",write(o+'""  "" '),write("\n"),this.cursorUp(this.numberOfLines)},NyanCat.prototype.face=function(){var t=this.stats;return t.failures?"( x .x)":t.pending?"( o .o)":t.passes?"( ^ .^)":"( - .-)"},NyanCat.prototype.cursorUp=function(t){write("["+t+"A")},NyanCat.prototype.cursorDown=function(t){write("["+t+"B")},NyanCat.prototype.generateColors=function(){for(var t=[],r=0;42>r;r++){var i=Math.floor(Math.PI/3),o=r*(1/6),n=Math.floor(3*Math.sin(o)+3),a=Math.floor(3*Math.sin(o+2*i)+3),e=Math.floor(3*Math.sin(o+4*i)+3);t.push(36*n+6*a+e+16)}return t},NyanCat.prototype.rainbowify=function(t){var r=this.rainbowColors[this.colorIndex%this.rainbowColors.length];return this.colorIndex+=1,"[38;5;"+r+"m"+t+"[0m"},NyanCat.prototype.__proto__=Base.prototype;