var Suite=require("../suite"),Test=require("../test"),utils=require("../utils"),escapeRe=require("escape-string-regexp");module.exports=function(a){var b=[a];a.on("pre-require",function(e,d,c){var f=require("./common")(b,e);e.before=f.before;e.after=f.after;e.beforeEach=f.beforeEach;e.afterEach=f.afterEach;e.run=c.options.delay&&f.runWithSuite(a);e.describe=e.context=function(i,h){var g=Suite.create(b[0],i);g.file=d;b.unshift(g);h.call(g);b.shift();return g};e.xdescribe=e.xcontext=e.describe.skip=function(i,h){var g=Suite.create(b[0],i);g.pending=true;b.unshift(g);h.call(g);b.shift()};e.describe.only=function(i,h){var g=e.describe(i,h);c.grep(g.fullTitle());return g};e.it=e.specify=function(i,h){var g=b[0];if(g.pending){h=null}var j=new Test(i,h);j.file=d;g.addTest(j);return j};e.it.only=function(i,h){var j=e.it(i,h);var g="^"+escapeRe(j.fullTitle())+"$";c.grep(new RegExp(g));return j};e.xit=e.xspecify=e.it.skip=function(g){e.it(g)}})};