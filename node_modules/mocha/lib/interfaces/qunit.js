var Suite=require("../suite"),Test=require("../test"),escapeRe=require("escape-string-regexp"),utils=require("../utils");module.exports=function(a){var b=[a];a.on("pre-require",function(e,d,c){var f=require("./common")(b,e);e.before=f.before;e.after=f.after;e.beforeEach=f.beforeEach;e.afterEach=f.afterEach;e.run=c.options.delay&&f.runWithSuite(a);e.suite=function(h){if(b.length>1){b.shift()}var g=Suite.create(b[0],h);g.file=d;b.unshift(g);return g};e.suite.only=function(i,h){var g=e.suite(i,h);c.grep(g.fullTitle())};e.test=function(h,g){var i=new Test(h,g);i.file=d;b[0].addTest(i);return i};e.test.only=function(i,h){var j=e.test(i,h);var g="^"+escapeRe(j.fullTitle())+"$";c.grep(new RegExp(g))};e.test.skip=f.test.skip})};