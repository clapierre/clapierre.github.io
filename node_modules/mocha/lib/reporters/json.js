var Base=require("./base"),cursor=Base.cursor,color=Base.color;exports=module.exports=JSONReporter;function JSONReporter(e){var a=this;Base.call(this,e);var c=[],f=[],b=[],d=[];e.on("test end",function(g){c.push(g)});e.on("pass",function(g){d.push(g)});e.on("fail",function(g){b.push(g)});e.on("pending",function(g){f.push(g)});e.on("end",function(){var g={stats:a.stats,tests:c.map(clean),pending:f.map(clean),failures:b.map(clean),passes:d.map(clean)};e.testResults=g;process.stdout.write(JSON.stringify(g,null,2))})}function clean(a){return{title:a.title,fullTitle:a.fullTitle(),duration:a.duration,err:errorJSON(a.err||{})}}function errorJSON(b){var a={};Object.getOwnPropertyNames(b).forEach(function(c){a[c]=b[c]},b);return a};