var mkdirp=require("../");var path=require("path");var fs=require("fs");var exists=fs.exists||path.exists;var test=require("tap").test;test("async perm",function(b){b.plan(5);var a="/tmp/"+(Math.random()*(1<<30)).toString(16);mkdirp(a,493,function(c){b.ifError(c);exists(a,function(d){b.ok(d,"file created");fs.stat(a,function(f,e){b.ifError(f);b.equal(e.mode&511,493);b.ok(e.isDirectory(),"target not a directory")})})})});test("async root perm",function(a){mkdirp("/tmp",493,function(b){if(b){a.fail(b)}a.end()});a.end()});