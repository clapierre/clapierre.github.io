var mkdirp=require("../").mkdirp;var path=require("path");var fs=require("fs");var exists=fs.exists||path.exists;var test=require("tap").test;test("race",function(f){f.plan(6);var g=["","tmp"];for(var e=0;e<25;e++){var b=Math.floor(Math.random()*Math.pow(16,4)).toString(16);g.push(b)}var d=g.join("/");var c=2;a(d,function(){if(--c===0){f.end()}});a(d,function(){if(--c===0){f.end()}});function a(i,h){mkdirp(i,493,function(j){f.ifError(j);exists(i,function(k){f.ok(k,"file created");fs.stat(i,function(m,l){f.ifError(m);f.equal(l.mode&511,493);f.ok(l.isDirectory(),"target not a directory");if(h){h()}})})})}});