"use strict";var fs=require("fs"),path=require("path"),util=require("util"),detective=require("detective"),colors=require("colors"),Base=require("./base");var CJS=module.exports=function(){Base.apply(this,arguments)};util.inherits(CJS,Base);CJS.prototype.normalize=function(a){a=this.replaceBackslashInPath(a);if(a.charAt(0)!=="/"&&!a.match(/^[a-z]:\//i)){return a}return Base.prototype.normalize.apply(this,arguments)};CJS.prototype.parseFile=function(a){try{if(fs.existsSync(a)){var c=[],f=this.getFileSource(a),b={filename:a,src:f};this.emit("parseFile",b);if(/require\s*\(/m.test(b.src)){detective(b.src).map(function(g){var e=this.resolve(path.dirname(b.filename),g);if(e){return this.normalize(e)}},this).filter(function(e){if(!this.isExcluded(e)&&c.indexOf(e)<0){c.push(e)}},this);return c}}}catch(d){if(this.opts.breakOnError){console.log(String("\nError while parsing file: "+a).red);throw d}}return[]};