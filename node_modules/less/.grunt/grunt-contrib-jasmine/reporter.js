"use strict";var phantom={};if(window._phantom){console.log=function(){phantom.sendMessage("verbose",Array.prototype.slice.apply(arguments).join(", "))}}phantom.sendMessage=function(){var a=[].slice.call(arguments);var b=JSON.stringify(a);if(window._phantom){alert(b)}};(function(){function c(){this.started=false;this.finished=false;this.suites_=[];this.results_={};this.buffer=""}c.prototype.reportRunnerStarting=function(j){this.started=true;var h=j.topLevelSuites();for(var f=0;f<h.length;f++){var g=h[f];this.suites_.push(this.summarize_(g))}phantom.sendMessage("jasmine.reportRunnerStarting",this.suites_)};c.prototype.reportSpecStarting=function(f){f.startTime=(new Date()).getTime();var g={suite:{description:f.suite.description},description:f.description};phantom.sendMessage("jasmine.reportSpecStarting",g)};c.prototype.suites=function(){return this.suites_};c.prototype.summarize_=function(k){var j=k instanceof jasmine.Suite;var f={id:k.id,name:k.description,type:j?"suite":"spec",children:[]};if(j){var h=k.children();for(var g=0;g<h.length;g++){f.children.push(this.summarize_(h[g]))}}return f};c.prototype.results=function(){return this.results_};c.prototype.resultsForSpec=function(f){return this.results_[f]};function b(h,j){var g=[];for(var i=0;i<h.length;i++){g.push(j(h[i]))}return g}c.prototype.reportRunnerResults=function(g){this.finished=true;var h=b(g.specs(),function(i){return i.id});var f=this.resultsForSpecs(h);phantom.sendMessage("jasmine.reportRunnerResults",f);phantom.sendMessage("jasmine.reportJUnitResults",this.generateJUnitSummary(g));phantom.sendMessage("jasmine.done.PhantomReporter")};c.prototype.reportSuiteResults=function(f){if(f.specs().length){f.timestamp=new Date();f.duration=f.timestamp.getTime()-f.specs()[0].startTime;phantom.sendMessage("jasmine.reportSuiteResults",{description:f.description,results:f.results()})}};function e(i){if(typeof i!=="object"){return i}var f=[],j=[],h;var g=JSON.stringify(i,function(k,l){if(!l){return l}if(typeof(Node)!=="undefined"&&l instanceof Node){return"[ Node ]"}if(l instanceof jasmine.Spec){return"[ Spec: "+l.description+" ]"}if(l.window&&l.window===l.window.window){return"[ Window ]"}if(typeof l==="function"){return"[ Function ]"}if(typeof l==="object"&&l!==null){if(h=f.indexOf(l)!==-1){return"[ Circular {"+(j[h]||"root")+"} ]"}f.push(l);j.push(k)}return l});return g}c.prototype.reportSpecResults=function(g){g.duration=(new Date()).getTime()-g.startTime;var f=g.results();var h={description:f.description,messages:f.getItems(),failedCount:f.failedCount,totalCount:f.totalCount,passedCount:f.passedCount,skipped:f.skipped,passed:f.passed(),msg:f.failedCount>0?"failed":"passed"};this.results_[g.id]=h;for(var i=0;i<h.messages.length;i++){var j=h.messages[i];if(j.expected){j.expected=e(j.expected)}if(j.actual){j.actual=e(j.actual)}}phantom.sendMessage("jasmine.reportSpecResults",g.id,h,this.getFullName(g))};c.prototype.getFullName=function(f){return d(f.suite,":: ")+":: "+f.description};c.prototype.resultsForSpecs=function(j){var h={};for(var g=0;g<j.length;g++){var f=j[g];h[f]=this.summarizeResult_(this.results_[f])}return h};c.prototype.summarizeResult_=function(f){var j=[];var g=f.messages.length;for(var i=0;i<g;i++){var h=f.messages[i];j.push({text:h.type==="log"?h.toString():jasmine.undefined,passed:h.passed?h.passed():true,type:h.type,message:h.message,trace:{stack:h.passed&&!h.passed()?h.trace.stack:jasmine.undefined}})}return{result:f.result,messages:j}};function d(g,f){var h=[];while(g){h.unshift(g.description);g=g.parentSuite}return h.join(f?f:" ")}function a(f){var g;while(f){g=f.id;f=f.parentSuite}return g}c.prototype.generateJUnitSummary=function(h){var f={},g=b(h.suites(),function(k){var j=0;var i=b(k.specs(),function(o){var r=[];var s=o.results();var m=s.items_;var n=m.length;if(s.failedCount){j++;for(var q=0;q<n;q++){var p=m[q];if(!p.passed()){r.push(p.message)}}}return{assertions:n,className:d(o.suite),name:o.description,time:o.duration/1000,failureMessages:r}});var l={name:d(k),time:k.duration/1000,timestamp:k.timestamp,tests:k.specs().length,errors:0,testcases:i,failures:j};if(k.parentSuite){f[a(k)].push(l)}else{f[k.id]=[l]}return l});return{suites:g,consolidatedSuites:f}};jasmine.getEnv().addReporter(new c())}());