var mout=require("mout");var Project=require("../core/Project");var cli=require("../util/cli");var defaultConfig=require("../config");function prune(c,b,a){var d;b=b||{};a=defaultConfig(a);d=new Project(a,c);return clean(d,b)}function clean(c,a,b){b=b||{};return c.getTree(a).spread(function(d,e,f){var g=f.map(function(h){return h.endpoint.name});return c.uninstall(g,a).then(function(h){if(!mout.object.size(h)){return b}mout.object.mixIn(b,h);return clean(c,a,b)})})}prune.line=function(c,a){var b=prune.options(a);return prune(c,b)};prune.options=function(a){return cli.readOptions({production:{type:Boolean,shorthand:"p"},},a)};prune.completion=function(){};module.exports=prune;