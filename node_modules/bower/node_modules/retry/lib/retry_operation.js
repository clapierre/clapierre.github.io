function RetryOperation(t){this._timeouts=t,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null}module.exports=RetryOperation,RetryOperation.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;this._errors.push(t);var e=this._timeouts.shift();if(void 0===e)return!1;this._attempts++;var o=this;return setTimeout(function(){o._fn(o._attempts),o._operationTimeoutCb&&(o._timeout=setTimeout(function(){o._operationTimeoutCb(o._attempts)},o._operationTimeout))},e),!0},RetryOperation.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb)),this._fn(this._attempts);var o=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){o._operationTimeoutCb()},o._operationTimeout))},RetryOperation.prototype["try"]=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)},RetryOperation.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)},RetryOperation.prototype.start=RetryOperation.prototype["try"],RetryOperation.prototype.errors=function(){return this._errors},RetryOperation.prototype.attempts=function(){return this._attempts},RetryOperation.prototype.mainError=function(){if(0===this._errors.length)return null;for(var t={},e=null,o=0,r=0;r<this._errors.length;r++){var i=this._errors[r],n=i.message,s=(t[n]||0)+1;t[n]=s,s>=o&&(e=i,o=s)}return e};
