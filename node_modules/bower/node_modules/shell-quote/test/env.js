var test=require("tape");var parse=require("../").parse;test("expand environment variables",function(a){a.same(parse("a $XYZ c",{XYZ:"b"}),["a","b","c"]);a.same(parse("a${XYZ}c",{XYZ:"b"}),["abc"]);a.same(parse("a${XYZ}c $XYZ",{XYZ:"b"}),["abc","b"]);a.same(parse('"-$X-$Y-"',{X:"a",Y:"b"}),["-a-b-"]);a.same(parse("'-$X-$Y-'",{X:"a",Y:"b"}),["-$X-$Y-"]);a.same(parse('qrs"$zzz"wxy',{zzz:"tuv"}),["qrstuvwxy"]);a.same(parse("qrs'$zzz'wxy",{zzz:"tuv"}),["qrs$zzzwxy"]);a.same(parse("qrs${zzz}wxy"),["qrswxy"]);a.same(parse("ab$x",{x:"c"}),["abc"]);a.same(parse("ab\\$x",{x:"c"}),["ab$x"]);a.same(parse("ab${x}def",{x:"c"}),["abcdef"]);a.same(parse("ab\\${x}def",{x:"c"}),["ab${x}def"]);a.same(parse('"ab\\${x}def"',{x:"c"}),["ab${x}def"]);a.end()});test("environment variables with metacharacters",function(a){a.same(parse("a $XYZ c",{XYZ:'"b"'}),["a",'"b"',"c"]);a.same(parse("a $XYZ c",{XYZ:"$X",X:5}),["a","$X","c"]);a.same(parse('a"$XYZ"c',{XYZ:"'xyz'"}),["a'xyz'c"]);a.end()});test("special shell parameters",function(a){var b="*@#?-$!0_".split("");a.plan(b.length);b.forEach(function(e){var d={};d[e]="xxx";a.same(parse("a $"+e+" c",d),["a","xxx","c"])})});