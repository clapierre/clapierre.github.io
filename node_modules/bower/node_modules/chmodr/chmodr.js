module.exports=chmodr;chmodr.sync=chmodrSync;var fs=require("fs"),path=require("path");function chmodr(b,c,a){fs.readdir(b,function(j,f){if(j&&j.code!=="ENOTDIR"){return a(j)}var i=!j;var e=i?dirMode(c):c;if(j||!f.length){return fs.chmod(b,e,a)}var d=f.length;var h=null;f.forEach(function(k){chmodr(path.resolve(b,k),c,g)});function g(k){if(h){return}if(k){return a(h=k)}if(--d===0){return fs.chmod(b,dirMode(c),a)}}})}function chmodrSync(b,c){var a;try{a=fs.readdirSync(b)}catch(d){if(d&&d.code==="ENOTDIR"){return fs.chmodSync(b,c)}throw d}if(!a.length){return fs.chmodSync(b,dirMode(c))}a.forEach(function(e){chmodrSync(path.resolve(b,e),c)});return fs.chmodSync(b,dirMode(c))}function dirMode(a){if(a&256){a|=64}if(a&32){a|=8}if(a&4){a|=1}return a};