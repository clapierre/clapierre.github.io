function read(e,r){function t(){h=!0,v.close(),process.version.match(/^v0\.6/)&&(v.input.removeAllListeners("data"),v.input.removeAllListeners("keypress"),v.input.pause()),clearTimeout(w),o.mute(),o.end()}function n(e){return h?void 0:(t(),r(e))}function u(e){if(!h){l&&m&&(o.unmute(),o.write("\r\n")),t(),e=e.replace(/\r?\n$/,"");var n=!(!s||e!==c);c&&!e&&(n=!0,e=c),r(null,e,n)}}if(e.num)throw new Error("read() no longer accepts a char number limit");if("undefined"!=typeof e["default"]&&"string"!=typeof e["default"]&&"number"!=typeof e["default"])throw new Error("default value must be string or number");var i=e.input||process.stdin,o=e.output||process.stdout,a=(e.prompt||"").trim()+" ",l=e.silent,s=!1,p=e.timeout,c=e["default"]||"";c&&(l?a+="(<default hidden>) ":e.edit?s=!0:a+="("+c+") ");var m=!(!e.terminal&&!o.isTTY),d=new Mute({replace:e.replace,prompt:a});d.pipe(o,{end:!1}),o=d;var f={input:i,output:o,terminal:m};if(process.version.match(/^v0\.6/))var v=readline.createInterface(f.input,f.output);else var v=readline.createInterface(f);o.unmute(),v.setPrompt(a),v.prompt(),l?o.mute():s&&(v.line=c,v.cursor=c.length,v._refreshLine());var h=!1;v.on("line",u),v.on("error",n),v.on("SIGINT",function(){v.close(),n(new Error("canceled"))});var w;p&&(w=setTimeout(function(){n(new Error("timed out"))},p))}module.exports=read;var readline=require("readline"),Mute=require("mute-stream");
