"use strict";var test=require("tap").test,path=require("path"),fs=require("fs"),hideSemicolonsTheme=require("../themes/hide-semicolons"),home=path.join(__dirname,"fixtures","home"),rcpath=path.join(home,".cardinalrc"),existsSync=fs.existsSync||path.existsSync,settingsResolve=require.resolve("../settings"),settings;function setup(){delete require.cache[settingsResolve];settings=require(settingsResolve)}function writerc(a){fs.writeFileSync(rcpath,JSON.stringify(a),"utf-8")}function removerc(){fs.unlinkSync(rcpath)}function resolveTheme(b){writerc(b);var a=settings.resolveTheme(home);removerc();return a}function getSettings(b){writerc(b);var a=settings.getSettings(home);removerc();return a}if(!existsSync(home)){fs.mkdirSync(home)}test("no .cardinalrc in home",function(a){setup();var b=settings.resolveTheme(home);a.equals(b,undefined,"resolves no theme");a.end()});test('.cardinalrc with theme "hide-semicolons" in home',function(a){setup();var b=resolveTheme({theme:"hide-semicolons"});a.deepEquals(b,hideSemicolonsTheme,"resolves hide-semicolons theme");a.end()});test('.cardinalrc with full path to "hide-semicolons.js" in home',function(a){setup();var b=resolveTheme({theme:path.join(__dirname,"..","themes","hide-semicolons.js")});a.deepEquals(b,hideSemicolonsTheme,"resolves hide-semicolons theme");a.end()});test(".cardinalrc with linenos: true",function(a){setup();var b={linenos:true};a.deepEquals(getSettings(b),b);a.end()});test(".cardinalrc with linenos: true and theme",function(a){setup();var b={linenos:true,theme:"some theme"};a.deepEquals(getSettings(b),b);a.end()});