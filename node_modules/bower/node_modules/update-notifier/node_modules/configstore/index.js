"use strict";var path=require("path");var fs=require("graceful-fs");var osenv=require("osenv");var assign=require("object-assign");var mkdirp=require("mkdirp");var uuid=require("uuid");var xdgBasedir=require("xdg-basedir");var osTmpdir=require("os-tmpdir");var writeFileAtomic=require("write-file-atomic");var user=(osenv.user()||uuid.v4()).replace(/\\/g,"");var configDir=xdgBasedir.config||path.join(osTmpdir(),user,".config");var permissionError="You don't have access to this file.";var defaultPathMode=parseInt("0700",8);var writeFileOptions={mode:parseInt("0600",8)};function Configstore(b,a){this.path=path.join(configDir,"configstore",b+".json");this.all=assign({},a||{},this.all||{})}Configstore.prototype=Object.create(Object.prototype,{all:{get:function(){try{return JSON.parse(fs.readFileSync(this.path,"utf8"))}catch(a){if(a.code==="ENOENT"){mkdirp.sync(path.dirname(this.path),defaultPathMode);return{}}if(a.code==="EACCES"){a.message=a.message+"\n"+permissionError+"\n"}if(a.name==="SyntaxError"){writeFileAtomic.sync(this.path,"",writeFileOptions);return{}}throw a}},set:function(b){try{mkdirp.sync(path.dirname(this.path),defaultPathMode);writeFileAtomic.sync(this.path,JSON.stringify(b,null,"\t"),writeFileOptions)}catch(a){if(a.code==="EACCES"){a.message=a.message+"\n"+permissionError+"\n"}throw a}}},size:{get:function(){return Object.keys(this.all||{}).length}}});Configstore.prototype.get=function(a){return this.all[a]};Configstore.prototype.set=function(b,c){var a=this.all;a[b]=c;this.all=a};Configstore.prototype.del=function(b){var a=this.all;delete a[b];this.all=a};Configstore.prototype.clear=function(){this.all={}};module.exports=Configstore;