var mkdirp=require("../");var path=require("path");var fs=require("fs");var exists=fs.exists||path.exists;var test=require("tap").test;test("implicit mode from umask",function(c){c.plan(5);var a=Math.floor(Math.random()*Math.pow(16,4)).toString(16);var e=Math.floor(Math.random()*Math.pow(16,4)).toString(16);var d=Math.floor(Math.random()*Math.pow(16,4)).toString(16);var b="/tmp/"+[a,e,d].join("/");mkdirp(b,function(f){c.ifError(f);exists(b,function(g){c.ok(g,"file created");fs.stat(b,function(i,h){c.ifError(i);c.equal(h.mode&511,511&(~process.umask()));c.ok(h.isDirectory(),"target not a directory")})})})});