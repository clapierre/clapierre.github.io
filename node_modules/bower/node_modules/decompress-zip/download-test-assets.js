var fs=require("fs");var request=require("request");var tmp=require("tmp");var exec=require("child_process").exec;var path=require("path");var url="https://drive.google.com/uc?id=0Bxxp2pVhWG1DTFNWQ1hsSkZKZmM&export=download";var errorHandler=function(a){throw a};var extract=function(a){exec("tar -xvzf "+a,{cwd:path.join(__dirname,"test"),maxBuffer:1024*1024},function(d,b,c){if(d){throw d}console.log("Done")})};tmp.file({prefix:"assets",postfix:".tgz"},function(d,a,b){console.log("Downloading "+url+" to "+a);var e=request(url);var c=fs.createWriteStream(a);e.on("error",errorHandler);c.on("error",errorHandler);e.on("end",function(){c.end(extract.bind(null,a))});e.pipe(c,{end:false})});