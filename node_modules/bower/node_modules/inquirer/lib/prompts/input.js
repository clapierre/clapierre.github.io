function Prompt(){return Base.apply(this,arguments)}var _=require("lodash"),util=require("util"),chalk=require("chalk"),Base=require("./base"),observe=require("../utils/events");module.exports=Prompt,util.inherits(Prompt,Base),Prompt.prototype._run=function(t){this.done=t;var r=observe(this.rl).line.map(this.filterInput.bind(this)),e=this.handleSubmitEvents(r);return e.success.forEach(this.onEnd.bind(this)),e.error.forEach(this.onError.bind(this)),this.render(),this},Prompt.prototype.render=function(){var t=this.getQuestion();this.write(t);var r=t.split(/\n/);return this.height=r.length,this.rl.setPrompt(_.last(r)),this},Prompt.prototype.filterInput=function(t){return t?t:null!=this.opt["default"]?this.opt["default"]:""},Prompt.prototype.onEnd=function(t){this.filter(t.value,function(r){this.status="answered",this.clean(1).render(),this.write(chalk.cyan(r)+"\n"),this.done(t.value)}.bind(this))},Prompt.prototype.onError=function(t){this.error(t.isValid).clean().render()};
