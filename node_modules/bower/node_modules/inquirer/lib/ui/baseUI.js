var _=require("lodash");var tty=require("../utils/tty");var readlineFacade=require("readline2");module.exports=UI;function UI(a){this.rl||(this.rl=readlineFacade.createInterface());this.rl.resume();this.onForceClose=this.onForceClose.bind(this);this.onKeypress=this.onKeypress.bind(this);this.rl.on("SIGINT",this.onForceClose);process.on("exit",this.onForceClose);process.stdin.addListener("keypress",this.onKeypress)}_.extend(UI.prototype,tty);UI.prototype.onForceClose=function(){this.close();console.log("\n")};UI.prototype.close=function(){this.rl.removeListener("SIGINT",this.onForceClose);process.stdin.removeListener("keypress",this.onKeypress);process.removeListener("exit",this.onForceClose);this.rl.output.unmute();process.stdout.write("\x1B[?25h");this.rl.output.end();this.rl.pause();this.rl.close();this.rl=null};UI.prototype.onKeypress=function(b,a){if(a&&(a.name==="enter"||a.name==="return")){return}if(this.rl){this.rl.emit("keypress",b,a)}};