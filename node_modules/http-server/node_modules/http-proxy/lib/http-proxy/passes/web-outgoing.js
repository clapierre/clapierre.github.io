var url=require("url"),passes=exports;var redirectRegex=/^30(1|2|7|8)$/;
/*!
 * Array of passes.
 *
 * A `pass` is just a function that is executed on `req, res, options`
 * so that you can easily add new checks while still keeping the base
 * flexible.
 */
[function removeChunked(c,b,a){if(c.httpVersion==="1.0"){delete a.headers["transfer-encoding"]}},function setConnection(c,b,a){if(c.httpVersion==="1.0"){a.headers.connection=c.headers.connection||"close"}else{if(!a.headers.connection){a.headers.connection=c.headers.connection||"keep-alive"}}},function setRedirectHostRewrite(e,d,a,c){if((c.hostRewrite||c.autoRewrite||c.protocolRewrite)&&a.headers.location&&redirectRegex.test(a.statusCode)){var f=url.parse(c.target);var b=url.parse(a.headers.location);if(f.host!=b.host){return}if(c.hostRewrite){b.host=c.hostRewrite}else{if(c.autoRewrite){b.host=e.headers.host}}if(c.protocolRewrite){b.protocol=c.protocolRewrite}a.headers.location=b.format()}},function writeHeaders(c,b,a){Object.keys(a.headers).forEach(function(d){b.setHeader(d,a.headers[d])})},function writeStatusCode(c,b,a){b.writeHead(a.statusCode)}].forEach(function(a){passes[a.name]=a});