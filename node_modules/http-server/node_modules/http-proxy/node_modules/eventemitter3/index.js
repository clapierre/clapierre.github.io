"use strict";var prefix=typeof Object.create!=="function"?"~":false;function EE(c,a,b){this.fn=c;this.context=a;this.once=b||false}function EventEmitter(){}EventEmitter.prototype._events=undefined;EventEmitter.prototype.listeners=function listeners(f,e){var c=prefix?prefix+f:f,g=this._events&&this._events[c];if(e){return !!g}if(!g){return[]}if(g.fn){return[g.fn]}for(var d=0,b=g.length,a=new Array(b);d<b;d++){a[d]=g[d].fn}return a};EventEmitter.prototype.emit=function emit(b,d,c,a,o,n){var m=prefix?prefix+b:b;if(!this._events||!this._events[m]){return false}var l=this._events[m],h=arguments.length,k,g;if("function"===typeof l.fn){if(l.once){this.removeListener(b,l.fn,undefined,true)}switch(h){case 1:return l.fn.call(l.context),true;case 2:return l.fn.call(l.context,d),true;case 3:return l.fn.call(l.context,d,c),true;case 4:return l.fn.call(l.context,d,c,a),true;case 5:return l.fn.call(l.context,d,c,a,o),true;case 6:return l.fn.call(l.context,d,c,a,o,n),true}for(g=1,k=new Array(h-1);g<h;g++){k[g-1]=arguments[g]}l.fn.apply(l.context,k)}else{var e=l.length,f;for(g=0;g<e;g++){if(l[g].once){this.removeListener(b,l[g].fn,undefined,true)}switch(h){case 1:l[g].fn.call(l[g].context);break;case 2:l[g].fn.call(l[g].context,d);break;case 3:l[g].fn.call(l[g].context,d,c);break;default:if(!k){for(f=1,k=new Array(h-1);f<h;f++){k[f-1]=arguments[f]}}l[g].fn.apply(l[g].context,k)}}}return true};EventEmitter.prototype.on=function on(d,c,b){var e=new EE(c,b||this),a=prefix?prefix+d:d;if(!this._events){this._events=prefix?{}:Object.create(null)}if(!this._events[a]){this._events[a]=e}else{if(!this._events[a].fn){this._events[a].push(e)}else{this._events[a]=[this._events[a],e]}}return this};EventEmitter.prototype.once=function once(d,c,b){var e=new EE(c,b||this,true),a=prefix?prefix+d:d;if(!this._events){this._events=prefix?{}:Object.create(null)}if(!this._events[a]){this._events[a]=e}else{if(!this._events[a].fn){this._events[a].push(e)}else{this._events[a]=[this._events[a],e]}}return this};EventEmitter.prototype.removeListener=function removeListener(a,g,c,b){var h=prefix?prefix+a:a;if(!this._events||!this._events[h]){return this}var f=this._events[h],j=[];if(g){if(f.fn){if(f.fn!==g||(b&&!f.once)||(c&&f.context!==c)){j.push(f)}}else{for(var e=0,d=f.length;e<d;e++){if(f[e].fn!==g||(b&&!f[e].once)||(c&&f[e].context!==c)){j.push(f[e])}}}}if(j.length){this._events[h]=j.length===1?j[0]:j}else{delete this._events[h]}return this};EventEmitter.prototype.removeAllListeners=function removeAllListeners(a){if(!this._events){return this}if(a){delete this._events[prefix?prefix+a:a]}else{this._events=prefix?{}:Object.create(null)}return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.addListener=EventEmitter.prototype.on;EventEmitter.prototype.setMaxListeners=function setMaxListeners(){return this};EventEmitter.prefixed=prefix;if("undefined"!==typeof module){module.exports=EventEmitter};