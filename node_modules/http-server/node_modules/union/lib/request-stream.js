var url=require("url"),util=require("util"),qs=require("qs"),HttpStream=require("./http-stream");var RequestStream=module.exports=function(a){a=a||{};HttpStream.call(this,a);this.on("pipe",this.pipeRequest);this.request=a.request};util.inherits(RequestStream,HttpStream);RequestStream.prototype.pipeRequest=function(a){this.url=this.originalUrl=a.url;this.method=a.method;this.httpVersion=a.httpVersion;this.httpVersionMajor=a.httpVersionMajor;this.httpVersionMinor=a.httpVersionMinor;this.setEncoding=a.setEncoding;this.connection=a.connection;this.socket=a.socket;if(a.query){this.query=a.query}else{this.query=~a.url.indexOf("?")?qs.parse(url.parse(a.url).query):{}}};["setEncoding"].forEach(function(a){RequestStream.prototype[a]=function(){return this.request[a].apply(this.request,arguments)}});