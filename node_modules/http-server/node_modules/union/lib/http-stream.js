var url=require("url"),util=require("util"),qs=require("qs"),BufferedStream=require("./buffered-stream");var HttpStream=module.exports=function(a){a=a||{};BufferedStream.call(this,a.limit);if(a.buffer===false){this.buffer=false}this.on("pipe",this.pipeState)};util.inherits(HttpStream,BufferedStream);HttpStream.prototype.pipeState=function(a){this.headers=a.headers;this.trailers=a.trailers;this.method=a.method;if(a.url){this.url=this.originalUrl=a.url}if(a.query){this.query=a.query}else{if(a.url){this.query=~a.url.indexOf("?")?qs.parse(url.parse(a.url).query):{}}}};