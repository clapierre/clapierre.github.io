var assert=require("assert"),request=require("request"),vows=require("vows"),union=require("../");vows.describe("union/header").addBatch({"When using `union`":{"with a server that responds with a header":{topic:function(){var e=this.callback,t=union.createServer({before:[function(t,r){r.on("header",function(){e(null,r)}),r.writeHead(200,{"content-type":"text"}),r.end()}]});t.listen(9092,function(){request("http://localhost:9092/")})},"it should have proper `headerSent` set":function(e,t){assert.isNull(e),assert.isTrue(t.headerSent)},"it should have proper `_emittedHeader` set":function(e,t){assert.isNull(e),assert.isTrue(t._emittedHeader)}}}})["export"](module);