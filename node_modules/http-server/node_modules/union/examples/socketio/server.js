var fs=require("fs"),union=require("union");var server=union.createServer({before:[function(b,a){fs.readFile(__dirname+"/index.html",function(c,d){if(c){a.writeHead(500);return a.end("Error loading index.html")}a.writeHead(200);a.end(d)})}]});server.listen(9090);var io=require("socket.io").listen(server);io.sockets.on("connection",function(a){a.emit("news",{hello:"world"});a.on("my other event",function(b){console.log(b)})});