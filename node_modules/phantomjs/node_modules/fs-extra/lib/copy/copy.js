var fs=require("graceful-fs");var path=require("path");var ncp=require("./ncp");var mkdir=require("../mkdirs");function copy(c,b,a,d){if(typeof a==="function"&&!d){d=a;a={}}else{if(typeof a==="function"||a instanceof RegExp){a={filter:a}}}d=d||function(){};fs.lstat(c,function(g,f){if(g){return d(g)}var e=null;if(f.isDirectory()){var h=b.split(path.sep);h.pop();e=h.join(path.sep)}else{e=path.dirname(b)}fs.exists(e,function(i){if(i){return ncp(c,b,a,d)}mkdir.mkdirs(e,function(j){if(j){return d(j)}ncp(c,b,a,d)})})})}module.exports=copy;