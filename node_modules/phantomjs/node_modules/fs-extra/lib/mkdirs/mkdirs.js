var fs=require("graceful-fs");var path=require("path");var o777=parseInt("0777",8);function mkdirs(c,b,f,e){if(typeof b==="function"){f=b;b={}}else{if(!b||typeof b!=="object"){b={mode:b}}}var d=b.mode;var a=b.fs||fs;if(d===undefined){d=o777&(~process.umask())}if(!e){e=null}f=f||Function();c=path.resolve(c);a.mkdir(c,d,function(g){if(!g){e=e||c;return f(null,e)}switch(g.code){case"ENOENT":if(path.dirname(c)===c){return f(g)}mkdirs(path.dirname(c),b,function(i,h){if(i){f(i,h)}else{mkdirs(c,b,f,h)}});break;default:a.stat(c,function(h,i){if(h||!i.isDirectory()){f(g,e)}else{f(null,e)}});break}})}module.exports=mkdirs;