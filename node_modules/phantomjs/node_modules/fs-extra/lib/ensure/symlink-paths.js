var path=require("path");path.isAbsolute=(path.isAbsolute)?path.isAbsolute:require("path-is-absolute");var fs=require("graceful-fs");function symlinkPaths(a,b,e){if(path.isAbsolute(a)){return fs.lstat(a,function(g,f){if(g){g.message=g.message.replace("lstat","ensureSymlink");return e(g)}return e(null,{toCwd:a,toDst:a})})}else{var c=path.dirname(b);var d=path.join(c,a);return fs.exists(d,function(f){if(f){return e(null,{toCwd:d,toDst:a})}else{return fs.lstat(a,function(h,g){if(h){h.message=h.message.replace("lstat","ensureSymlink");return e(h)}return e(null,{toCwd:a,toDst:path.relative(c,a)})})}})}}function symlinkPathsSync(a,b){var d;if(path.isAbsolute(a)){d=fs.existsSync(a);if(!d){throw new Error("absolute srcpath does not exist")}return{toCwd:a,toDst:a}}else{var c=path.dirname(b);var e=path.join(c,a);d=fs.existsSync(e);if(d){return{toCwd:e,toDst:a}}else{d=fs.existsSync(a);if(!d){throw new Error("relative srcpath does not exist")}return{toCwd:a,toDst:path.relative(c,a)}}}}module.exports={symlinkPaths:symlinkPaths,symlinkPathsSync:symlinkPathsSync};