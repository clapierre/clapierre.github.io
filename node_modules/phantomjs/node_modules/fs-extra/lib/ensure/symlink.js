var path=require("path");var fs=require("graceful-fs");var _mkdirs=require("../mkdirs");var mkdirs=_mkdirs.mkdirs;var mkdirsSync=_mkdirs.mkdirsSync;var _symlinkPaths=require("./symlink-paths");var symlinkPaths=_symlinkPaths.symlinkPaths;var symlinkPathsSync=_symlinkPaths.symlinkPathsSync;var _symlinkType=require("./symlink-type");var symlinkType=_symlinkType.symlinkType;var symlinkTypeSync=_symlinkType.symlinkTypeSync;function createSymlink(a,b,c,d){d=(typeof c==="function")?c:d;c=(typeof c==="function")?false:c;fs.exists(b,function(e){if(e){return d(null)}symlinkPaths(a,b,function(f,g){if(f){return d(f)}a=g.toDst;symlinkType(g.toCwd,c,function(j,i){if(j){return d(j)}var h=path.dirname(b);fs.exists(h,function(k){if(k){return fs.symlink(a,b,i,d)}mkdirs(h,function(l){if(l){return d(l)}fs.symlink(a,b,i,d)})})})})})}function createSymlinkSync(a,c,d,h){h=(typeof d==="function")?d:h;d=(typeof d==="function")?false:d;var g=fs.existsSync(c);if(g){return undefined}var f=symlinkPathsSync(a,c);a=f.toDst;d=symlinkTypeSync(f.toCwd,d);var b=path.dirname(c);var e=fs.existsSync(b);if(e){return fs.symlinkSync(a,c,d)}mkdirsSync(b);return fs.symlinkSync(a,c,d)}module.exports={createSymlink:createSymlink,createSymlinkSync:createSymlinkSync,ensureSymlink:createSymlink,ensureSymlinkSync:createSymlinkSync};