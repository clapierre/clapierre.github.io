var fs=require("graceful-fs");var path=require("path");var copyFileSync=require("./copy-file-sync");var mkdir=require("../mkdirs");function copySync(a,h,i){if(typeof i==="function"||i instanceof RegExp){i={filter:i}}i=i||{};i.recursive=!!i.recursive;i.clobber="clobber" in i?!!i.clobber:true;i.preserveTimestamps="preserveTimestamps" in i?!!i.preserveTimestamps:true;i.filter=i.filter||function(){return true};var g=i.recursive?fs.lstatSync(a):fs.statSync(a);var f=path.dirname(h);var d=fs.existsSync(f);var e=false;if(g.isFile()){if(i.filter instanceof RegExp){e=i.filter.test(a)}else{if(typeof i.filter==="function"){e=i.filter(a)}}if(e){if(!d){mkdir.mkdirsSync(f)}copyFileSync(a,h,{clobber:i.clobber,preserveTimestamps:i.preserveTimestamps})}}else{if(g.isDirectory()){if(!fs.existsSync(h)){mkdir.mkdirsSync(h)}var c=fs.readdirSync(a);c.forEach(function(k){var j=i;j.recursive=true;copySync(path.join(a,k),path.join(h,k),j)})}else{if(i.recursive&&g.isSymbolicLink()){var b=fs.readlinkSync(a);fs.symlinkSync(b,h)}}}}module.exports=copySync;