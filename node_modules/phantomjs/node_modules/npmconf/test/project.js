var test=require("tap").test;var npmconf=require("../npmconf.js");var common=require("./00-setup.js");var path=require("path");var fix=path.resolve(__dirname,"fixtures");var projectRc=path.resolve(fix,".npmrc");var projectData={just:"testing"};var ucData=common.ucData;var envData=common.envData;var envDataFix=common.envDataFix;var gcData={"package-config:foo":"boo"};var biData={};var cli={foo:"bar",umask:18,prefix:fix};var expectList=[cli,envDataFix,projectData,ucData,gcData,biData];var expectSources={cli:{data:cli},env:{data:envDataFix,source:envData,prefix:""},project:{path:projectRc,type:"ini",data:projectData},user:{path:common.userconfig,type:"ini",data:ucData},global:{path:common.globalconfig,type:"ini",data:gcData},builtin:{data:biData}};test("no builtin",function(a){npmconf.load(cli,function(c,b){if(c){throw c}a.same(b.list,expectList);a.same(b.sources,expectSources);a.same(npmconf.rootConf.list,[]);a.equal(npmconf.rootConf.root,npmconf.defs.defaults);a.equal(b.root,npmconf.defs.defaults);a.equal(b.get("umask"),18);a.equal(b.get("heading"),"npm");a.end()})});