module.exports=ProtoList;function setProto(b,a){if(typeof Object.setPrototypeOf==="function"){return Object.setPrototypeOf(b,a)}else{b.__proto__=a}}function ProtoList(){this.list=[];var a=null;Object.defineProperty(this,"root",{get:function(){return a},set:function(b){a=b;if(this.list.length){setProto(this.list[this.list.length-1],b)}},enumerable:true,configurable:true})}ProtoList.prototype={get lengthfunction(){return this.list.length},get keysfunction(){var a=[];for(var b in this.list[0]){a.push(b)}return a},get snapshotfunction(){var a={};this.keys.forEach(function(b){a[b]=this.get(b)},this);return a},get storefunction(){return this.list[0]},push:function(a){if(typeof a!=="object"){a={valueOf:a}}if(this.list.length>=1){setProto(this.list[this.list.length-1],a)}setProto(a,this.root);return this.list.push(a)},pop:function(){if(this.list.length>=2){setProto(this.list[this.list.length-2],this.root)}return this.list.pop()},unshift:function(a){setProto(a,this.list[0]||this.root);return this.list.unshift(a)},shift:function(){if(this.list.length===1){setProto(this.list[0],this.root)}return this.list.shift()},get:function(a){return this.list[0][a]},set:function(a,c,b){if(!this.length){this.push({})}if(b&&this.list[0].hasOwnProperty(a)){this.push({})}return this.list[0][a]=c},forEach:function(c,b){for(var a in this.list[0]){c.call(b,a,this.list[0][a])}},slice:function(){return this.list.slice.apply(this.list,arguments)},splice:function(){var b=this.list.splice.apply(this.list,arguments);for(var c=0,a=this.list.length;c<a;c++){setProto(this.list[c],this.list[c+1]||this.root)}return b}};