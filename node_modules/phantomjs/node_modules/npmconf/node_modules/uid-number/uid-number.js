module.exports=uidNumber;var child_process=require("child_process"),path=require("path"),uidSupport=process.getuid&&process.setuid,uidCache={},gidCache={};function uidNumber(c,d,b){if(!uidSupport){return b()}if(typeof b!=="function"){b=d,d=null}if(typeof b!=="function"){b=c,c=null}if(d==null){d=process.getgid()}if(c==null){c=process.getuid()}if(!isNaN(d)){d=gidCache[d]=+d}if(!isNaN(c)){c=uidCache[c]=+c}if(uidCache.hasOwnProperty(c)){c=uidCache[c]}if(gidCache.hasOwnProperty(d)){d=gidCache[d]}if(typeof d==="number"&&typeof c==="number"){return process.nextTick(b.bind(null,null,c,d))}var a=require.resolve("./get-uid-gid.js");child_process.execFile(process.execPath,[a,c,d],function(h,e,g){if(i){return b(new Error("could not get uid/gid\n"+g))}try{e=JSON.parse(e+"")}catch(f){return b(f)}if(e.error){var i=new Error(e.error);i.errno=e.errno;return b(i)}if(isNaN(e.uid)||isNaN(e.gid)){return b(new Error("Could not get uid/gid: "+JSON.stringify(e)))}b(null,uidCache[c]=+e.uid,gidCache[d]=+e.gid)})};