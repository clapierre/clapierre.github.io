var test=require("tap").test;var wrappy=require("../wrappy.js");test("basic",function(j){function a(c){var k=false;return function(){if(k){return}k=true;return c.apply(this,arguments)}}a.iAmOnce={};var b=wrappy(a);j.equal(b.iAmOnce,a.iAmOnce);var g=0;function h(){j.equal(g,0);g++}h.iAmBoo=true;var e=b(h);e();e();j.equal(g,1);j.equal(e.iAmBoo,true);var d=[];var i=wrappy(function(k,c){d.push(k+" wrapping cb");return function(){d.push(k+" before cb");var l=c.apply(this,arguments);d.push(k+" after cb")}});var f=i("foo",function(){j.same(d,["foo wrapping cb","foo before cb"])});f();j.same(d,["foo wrapping cb","foo before cb","foo after cb"]);j.end()});