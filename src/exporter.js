define(["vellum/tsv"],function(b){var a=function(d){var f=d.vellum.data.javaRosa.Itext.getLanguages();var c={"default":"Text",audio:"Audio",image:"Image"};var g=["Question","Type"];for(var j in c){var k=c[j];for(var h=0;h<f.length;h++){g.push(k+" ("+f[h]+")")}}g=g.concat(["Display Condition","Validation Condition","Validation Message","Calculate Condition","Required"]);var e=function(p){var v={},s=p.p.labelItext,q=d.vellum.data.javaRosa.Itext.getDefaultLanguage(),o;var n=function(w,x,i){return(w&&w.hasForm(i))?w.getForm(i).getValueOrDefault(x):""};for(o=0;o<g.length;o++){v[g[o]]=""}if(p.options.tagName!=="item"){v.Question=d.getAbsolutePath(p,true)}else{v.Question=d.getAbsolutePath(p.parentMug,true)+"-"+p.p.nodeID}v.Type=p.options.typeName;if(!p.options.isDataOnly){for(var r in c){var t=c[r];for(o=0;o<f.length;o++){var u=t+" ("+f[o]+")";v[u]=n(s,f[o],r)}}}if(p.p.getDefinition("relevantAttr")){v["Display Condition"]=p.p.relevantAttr;v["Calculate Condition"]=p.p.calculateAttr;v.Required=p.p.requiredAttr?"yes":"no";v["Validation Condition"]=p.p.constraintAttr;v["Validation Message"]=n(p.p.constraintMsgItext,q,"default")}for(var m in v){if(v.hasOwnProperty(m)){v[m]=v[m]||""}}return g.map(function(i){return v[i]})};var l=[g].concat(d.getMugList().map(e));return b.tabDelimit(l)};return{generateExportTSV:a}});