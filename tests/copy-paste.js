require(["chai","jquery","underscore","tests/utils","text!static/copy-paste/four-questions.xml","text!static/copy-paste/many-itext-forms.xml","text!static/copy-paste/text-question.xml","text!static/copy-paste/two-choices.xml","text!static/copy-paste/two-questions.xml","vellum/copy-paste","vellum/tsv"],function(g,f,n,h,l,j,m,i,b,k,c){var a=g.assert,p=h.call,d=["Form Builder clip","version 1"];function o(q,s,r){if(!n.isString(s)){s=c.tabDelimit([d].concat(s))}h.assertEqual(q+"\n",s+"\n",r||"cut or copy mismatch")}function e(r,s,q){if(!n.isString(r)){r=c.tabDelimit([d].concat(r))}if(q){window.console.log(r)}a.deepEqual(k.paste(r),s||[])}describe("The copy-paste plugin",function(){before(function(q){h.init({javaRosa:{langs:["en"]},core:{onReady:function(){a(this.isPluginEnabled("copyPaste"),"copyPaste plugin should be enabled");q()}}})});n.each([{message:"a text question",xml:m,serial:c.tabDelimit([d,["id","type","labelItext:en-default","labelItext:hin-default","constraintMsgItext:en-default","constraintMsgItext:hin-default","constraintAttr","relevantAttr","requiredAttr",],["/txt","Text","English Text","Hindi Text","Nope","Nope","1 = 0","x = y","true",],]),},{message:"two text questions",xml:b,select:["text","choice"],serial:c.tabDelimit([d,["id","type","labelItext:en-default","labelItext:hin-default","labelItext",],["/text","Text","text with image","text with image","default-label",],["/choice","Select","Do you like it?","Do you like it?","null",],["/choice/true","Item","Yes","Yes","null",],["/choice/false","Item","No","No","null",],]),},{message:"two choices with shared itext",xml:i,select:["box","fox"],serial:c.tabDelimit([d,["id","type","labelItext:en-default","labelItext:hin-default","labelItext",],["/box","Select","In a box?","In a box?","null",],["/box/yes","Item","Yes","Yes","yes-label",],["/box/no","Item","No","No","no-label",],["/fox","Select","With a fox?","With a fox?","null",],["/fox/yes","Item","Yes","Yes","yes-label",],["/fox/no","Item","No","No","no-label",],]),},{message:"a question with many itext forms",xml:j,serial:c.tabDelimit([d,["id","type","labelItext:en-default","labelItext:hin-default","labelItext:en-audio","labelItext:hin-audio","labelItext:en-custom","labelItext:hin-custom","labelItext:en-image","labelItext:hin-image","labelItext:en-long","labelItext:hin-long","labelItext:en-short","labelItext:hin-short","labelItext:en-video","labelItext:hin-video","labelItext","constraintMsgItext:en-default","constraintMsgItext:hin-default","helpItext:en-default","helpItext:hin-default","helpItext:en-audio","helpItext:hin-audio","helpItext:en-image","helpItext:hin-image","helpItext:en-video","helpItext:hin-video","helpItext","hintItext:en-default","hintItext:hin-default","hintItext","constraintAttr","hintLabel",],["/text","Text","default","default","jr://file/commcare/audio/data/text.mp3","jr://file/commcare/audio/data/text.mp3","custom","custom","jr://file/commcare/image/data/text.png","jr://file/commcare/image/data/text.png","long","long","short","short","jr://file/commcare/video/data/text.3gp","jr://file/commcare/video/data/text.3gp","default-label","valid","valid","help","help","jr://file/commcare/audio/help/data/text.mp3","jr://file/commcare/audio/help/data/text.mp3","jr://file/commcare/image/help/data/text.png","jr://file/commcare/image/help/data/text.png","jr://file/commcare/video/help/data/text.3gp","jr://file/commcare/video/help/data/text.3gp","default-help","hint","hint","default-hint","1 = 0","hint label",],]),}],function(q){it("should copy "+q.message,function(){h.loadXML(q.xml);if(q.select){h.clickQuestion.apply(null,q.select)}o(k.copy(),q.serial)});it("should paste "+q.message,function(){h.loadXML("");a.deepEqual(k.paste(q.serial),[]);h.assertXmlEqual(p("createXML"),q.xml,{normalize_xmlns:true})})});it("should copy two text questions in a group",function(){h.loadXML(l);h.clickQuestion("group/text","group/choice");o(k.copy(),[["id","type","labelItext:en-default","labelItext:hin-default","labelItext:en-image","labelItext:hin-image","labelItext",],["/group/text","Text","text with image","ひらがな","jr://file/commcare/image/data/en-text.png","jr://file/commcare/image/data/hin-text.png","text-label",],["/group/choice","Select","Do you like it?","Do you like it?","null","null","null",],["/group/choice/true","Item","Yes","Yes","null","null","null",],["/group/choice/false","Item","No","No","null","null","null",],])});it("should paste two questions with the same id",function(){h.loadXML("");e([["id","type","labelItext:en-default","labelItext:hin-default"],["/text","Text","text1","text1"],["/text","Text","text2","text2"],]);h.selectAll();o(k.copy(),[["id","type","labelItext:en-default","labelItext:hin-default"],["/text","Text","text1","text1"],["/copy-1-of-text","Text","text2","text2"],])});it("should auto-rename pasted question with duplicate id",function(){h.loadXML("");e([["id","type","labelItext:en-default","labelItext:hin-default"],["/text","Text","text1","text1"],]);e([["id","type","labelItext:en-default","labelItext:hin-default"],["/text","Text","text2","text2"],]);h.selectAll();o(k.copy(),[["id","type","labelItext:en-default","labelItext:hin-default"],["/text","Text","text1","text1"],["/copy-1-of-text","Text","text2","text2"],])});it("should copy conflicted question id",function(){h.loadXML("");e([["id","type","labelItext:en-default","labelItext:hin-default"],["/text","Text","text1","text1"],["/other","Text","text2","text2"],]);var q=h.getMug("other");q.p.nodeID="text";a(q.messages.get("nodeID","mug-conflictedNodeId-warning"),"expected confict warning");h.selectAll();o(k.copy(),[["id","type","labelItext:en-default","labelItext:hin-default","conflictedNodeId"],["/text","Text","text1","text1","null"],["/copy-1-of-text","Text","text2","text2","text"],])});it("should paste two questions with the same id (one in group)",function(){h.loadXML("");e([["id","type","labelItext:en-default","labelItext:hin-default"],["/text","Text","text","text"],["/group","Group","group","group"],["/group/text","Text","text","text"],]);h.selectAll();o(k.copy(),[["id","type","labelItext:en-default","labelItext:hin-default"],["/text","Text","text","text"],["/group","Group","group","group"],["/group/text","Text","text","text"],])});it("should paste three groups after text question",function(){h.loadXML("");e([["id","type","labelItext:en-default","labelItext:hin-default"],["/text","Text","text","text"],]);h.clickQuestion("text");e([["id","type","labelItext:en-default","labelItext:hin-default"],["/group1","Group","group","group"],["/group2","Group","group","group"],["/group3","Group","group","group"],]);h.selectAll();o(k.copy(),[["id","type","labelItext:en-default","labelItext:hin-default"],["/text","Text","text","text"],["/group1","Group","group","group"],["/group2","Group","group","group"],["/group3","Group","group","group"],])});it("should paste three groups into group",function(){h.loadXML("");e([["id","type","labelItext:en-default","labelItext:hin-default"],["/group","Group","group","group"],]);h.clickQuestion("group");e([["id","type","labelItext:en-default","labelItext:hin-default"],["/group1","Group","group","group"],["/group2","Group","group","group"],["/group3","Group","group","group"],]);h.selectAll();o(k.copy(),[["id","type","labelItext:en-default","labelItext:hin-default"],["/group","Group","group","group"],["/group/group1","Group","group","group"],["/group/group2","Group","group","group"],["/group/group3","Group","group","group"],])});it("should resolve pasted question with conflicting question ID",function(){h.loadXML("");e([["id","type","calculateAttr","conflictedNodeId"],["/radius","DataBindOnly","42","null"],["/copy-1-of-pi","DataBindOnly","3.1415","pi"],["/circumference","DataBindOnly","2 * /data/copy-1-of-pi * /data/radius","null"],]);h.selectAll();o(k.copy(),[["id","type","calculateAttr"],["/radius","DataBindOnly","42"],["/pi","DataBindOnly","3.1415"],["/circumference","DataBindOnly","2 * /data/pi * /data/radius"],])});it("should not paste item into tree root",function(){h.loadXML("");e([["id","type","labelItext:en-default","labelItext:hin-default"],["/select/item","Item","item1","item1"],],["Cannot insert Choice into tree root"]);h.selectAll();o(k.copy(),"")});it("should not paste text into select",function(){h.loadXML("");e([["id","type","labelItext:en-default","labelItext:hin-default"],["/select","Select","select","select"],["/select/item1","Item","item1","item1"],]);h.clickQuestion("select/item1");e([["id","type","labelItext:en-default","labelItext:hin-default"],["/text","Text","text","text"],],["Cannot insert Text into Single Answer"]);h.selectAll();o(k.copy(),[["id","type","labelItext:en-default","labelItext:hin-default"],["/select","Select","select","select"],["/select/item1","Item","item1","item1"],])});it("should paste question with empty id",function(){h.loadXML("");e([["id","type","labelItext:en-default","labelItext:hin-default"],["","Text","text","text"],]);h.selectAll();o(k.copy(),[["id","type","labelItext:en-default","labelItext:hin-default"],["/question1","Text","text","text"],])});it("should paste question with / id",function(){h.loadXML("");e([["id","type","labelItext:en-default","labelItext:hin-default"],["/","Text","text","text"],]);h.selectAll();o(k.copy(),[["id","type","labelItext:en-default","labelItext:hin-default"],["/question2","Text","text","text"],])});it("should not paste item into or after text",function(){h.loadXML("");e([["id","type","labelItext:en-default","labelItext:hin-default"],["/text","Text","text","text"],]);h.selectAll();e([["id","type","labelItext:en-default","labelItext:hin-default"],["/select/item","Item","item1","item1"],],["Cannot insert Choice into or after Text"]);h.selectAll();o(k.copy(),[["id","type","labelItext:en-default","labelItext:hin-default"],["/text","Text","text","text"],])});it("should not overwrite itext with auto-id",function(){h.loadXML("");e([["id","type","labelItext:en-default","labelItext:hin-default"],["/text","Text","auto","auto"],]);h.clickQuestion("text");e([["id","type","labelItext:en-default","labelItext:hin-default","labelItext"],["/text2","Text","non","non","text-label"],]);h.selectAll();o(k.copy(),[["id","type","labelItext:en-default","labelItext:hin-default","labelItext"],["/text","Text","auto","auto","null"],["/text2","Text","non","non","text-label"],]);p("createXML");var r=h.getMug("text"),q=h.getMug("text2");a.equal(r.p.labelItext.autoId,true);a.equal(r.p.labelItext.id,"text-label");a.equal(r.p.labelItext.get(),"auto");a.equal(q.p.labelItext.autoId,false);a.equal(q.p.labelItext.id,"text-label2");a.equal(q.p.labelItext.get(),"non")});it("should not fill empty itext forms",function(){h.loadXML("");e([["id","type","labelItext:en-default"],["/text1","Text","Label"],["/text2","Text",""],["/text3","Text","null"],["/text4","Text"],]);h.selectAll();o(k.copy(),[["id","type","labelItext:en-default","labelItext:hin-default"],["/text1","Text","Label","Label"],["/text2","Text","null","null"],["/text3","Text","null","null"],["/text4","Text","null","null"],])});it("should not fill empty default itext forms",function(){h.loadXML("");e([["id","type","labelItext:en-default","labelItext:hin-default"],["/text","Text","","Label"],]);h.selectAll();o(k.copy(),[["id","type","labelItext:en-default","labelItext:hin-default"],["/text","Text","","Label"],])});it("should not paste defaults into empty itext items",function(){h.loadXML("");e([["id","type","labelItext:en-default","labelItext:hin-default","constraintMsgItext:en-default","constraintMsgItext:hin-default","constraintAttr"],["/text1","Text","text1","text1","validate","validate","x = y"],["/text2","Text","text2","text2","null","null","null"],]);h.selectAll();o(k.copy(),[["id","type","labelItext:en-default","labelItext:hin-default","constraintMsgItext:en-default","constraintMsgItext:hin-default","constraintAttr"],["/text1","Text","text1","text1","validate","validate","x = y"],["/text2","Text","text2","text2","null","null","null"],])});it("should not paste empty itext media forms",function(){h.loadXML("");e([["id","type","labelItext:en-default","labelItext:hin-default","labelItext:en-image","labelItext:hin-image"],["/text1","Text","text1","text1","jr://...","jr://..."],["/text2","Text","text2","text2","null","null"],]);h.clickQuestion("text1");var q=f(".fd-mm-upload-container:visible");a(q.length,"text1 media uploader should be visible");h.clickQuestion("text2");q=f(".fd-mm-upload-container:visible");a.equal(q.length,0,"text2 media uploader should be hidden");h.selectAll();o(k.copy(),[["id","type","labelItext:en-default","labelItext:hin-default","labelItext:en-image","labelItext:hin-image"],["/text1","Text","text1","text1","jr://...","jr://..."],["/text2","Text","text2","text2","null","null"],])});it("should ignore extra cells in header row",function(){h.loadXML("");e(c.tabDelimit([d.concat(["",""]),["id","type","labelItext:en-default","labelItext"],["/text1","Text","text","text-id"],]));h.selectAll();o(k.copy(),[["id","type","labelItext:en-default","labelItext:hin-default","labelItext"],["/text1","Text","text","text","text-id"],])});it("should ignore empty itext ID",function(){h.loadXML("");e([["id","type","labelItext:en-default","labelItext"],["/text1","Text","text"],["/text2","Text"],]);h.selectAll();o(k.copy(),[["id","type","labelItext:en-default","labelItext:hin-default"],["/text1","Text","text","text"],["/text2","Text","null","null"],])});it("should remove questions on cut",function(){h.loadXML("");e([["id","type","labelItext:en-default","labelItext"],["/text1","Text","text","text-id"],]);h.selectAll();o(k.cut(),[["id","type","labelItext:en-default","labelItext:hin-default","labelItext"],["/text1","Text","text","text","text-id"],]);h.selectAll();o(k.cut(),"")});it("should copy dynamic select with itemset data",function(){h.loadXML("");e([["id","type","labelItext:en-default","itemsetData"],["/select","SelectDynamic","select",'[{"instance":null,"nodeset":"/items","labelRef":"@name","valueRef":"@id"}]'],]);h.selectAll();o(k.copy(),[["id","type","labelItext:en-default","labelItext:hin-default","itemsetData"],["/select","SelectDynamic","select","select",'[{"instance":null,"nodeset":"/items","labelRef":"@name","valueRef":"@id"}]'],])});it("should not cut itemset (External Data)",function(){h.loadXML("");e([["id","type","labelItext:en-default","itemsetData"],["/select","SelectDynamic","select",'[{"instance":null,"nodeset":"/items","labelRef":"@name","valueRef":"@id"}]'],]);h.clickQuestion("select/itemset");o(k.cut(),"");a(h.getMug("select/itemset"),"itemset should not be cut")});it("should copy dynamic select with itemset data and instance",function(){var q=[["id","type","labelItext:en-default","labelItext:hin-default","instances","itemsetData"],["/select","SelectDynamic","select","select",'{"foo":"jr://foo"}','[{"instance":{"id":"foo","src":"jr://foo"},"nodeset":"instance(\'foo\')/foo/items","labelRef":"@name","valueRef":"@id"}]'],];h.loadXML("");e(q);h.selectAll();o(k.copy(),q)});it("should copy dynamic select with itemset data and filter",function(){var q=[["id","type","labelItext:en-default","labelItext:hin-default","filter","instances","itemsetData"],["/select","SelectDynamic","select","select","[\"type = instance('fum')/fum/@type\"]",'{"foo":"jr://foo","fum":"jr://fum"}','[{"instance":{"id":"foo","src":"jr://foo"},"nodeset":"instance(\'foo\')/foo/items","labelRef":"@name","valueRef":"@id"}]'],];h.loadXML("");e(q);h.selectAll();o(k.copy(),q)});it("should show validation errors in tree after paste",function(){h.loadXML("");e([["id","type","calculateAttr"],["/two","DataBindOnly","2"],["/double_trouble","DataBindOnly","/data/two * /data/trouble"],]);a(h.isTreeNodeValid("two"),h.getMessages("two"));a(!h.isTreeNodeValid("double_trouble"),"double_trouble should not be valid")});it("should show warning on paste missing multimedia",function(){h.loadXML("");e([["id","type","labelItext:en-audio"],["/text","Text","jr://file/commcare/audio/data/question1.mp3"],]);var q=h.getMug("text");a(q.messages.get("labelItext","missing-multimedia-warning"),"text should have missing-multimedia-warning")});it("should copy questions in tree order",function(){h.loadXML("");e([["id","type","labelItext:en-default"],["/text1","Text","text1"],["/text2","Text","text2"],["/text3","Text","text3"],["/group","Group","group"],["/group/text1","Text","text1"],["/group/text2","Text","text2"],["/group/text3","Text","text3"],]);h.clickQuestion("text3","group/text2","group/text1","text1");o(k.copy(),[["id","type","labelItext:en-default","labelItext:hin-default"],["/text1","Text","text1","text1"],["/text3","Text","text3","text3"],["/group/text1","Text","text1","text1"],["/group/text2","Text","text2","text2"],])});it("should paste questions in tree order",function(){h.loadXML("");e([["id","type","labelItext:en-default","labelItext:hin-default"],["/question1","Text","question1","question1"],["/question2","Select","question2","question2"],["/question2/item1","Item","item1","item1"],["/question2/item2","Item","item2","item2"],["/question3","Int","question3","question3"],["/question4","Date","question4","question4"],["/question5","DataBindOnly","null","null"],]);h.clickQuestion("question1","question2","question3","question4","question5");k.paste(k.copy());h.selectAll();o(k.copy(),[["id","type","labelItext:en-default","labelItext:hin-default"],["/question1","Text","question1","question1"],["/question2","Select","question2","question2"],["/question2/item1","Item","item1","item1"],["/question2/item2","Item","item2","item2"],["/question3","Int","question3","question3"],["/question4","Date","question4","question4"],["/question5","DataBindOnly","null","null"],["/copy-1-of-question1","Text","question1","question1"],["/copy-1-of-question2","Select","question2","question2"],["/copy-1-of-question2/item1","Item","item1","item1"],["/copy-1-of-question2/item2","Item","item2","item2"],["/copy-1-of-question3","Int","question3","question3"],["/copy-1-of-question4","Date","question4","question4"],["/copy-1-of-question5","DataBindOnly","null","null"],])});it("should warn about discarded languages",function(){h.loadXML("");e([["id","type","labelItext:en-default","labelItext:es-default","labelItext:fr-default"],["/text","Text","english","spanish","french"],],["Discarded languages: es, fr"]);h.selectAll();o(k.copy(),[["id","type","labelItext:en-default","labelItext:hin-default"],["/text","Text","english","english"],]);a(h.isTreeNodeValid("text"),h.getMessages("text"))});it("should paste and copy a model iteration repeat group",function(){var q=[["id","type","labelItext:en-default","labelItext:hin-default","dataSource","instances"],["/repeat/item","Repeat","repeat","repeat",'{"idsQuery":"instance(\'products\')/products/product/@id"}','{"products":"jr://commtrack:products"}'],];h.loadXML("");e(q);h.selectAll();o(k.copy(),q);a(h.isTreeNodeValid("repeat/item"),h.getMessages("repeat/item"))});it("should paste (legacy format) and copy a model iteration repeat group",function(){h.loadXML("");e([["id","type","labelItext:en-default","labelItext:hin-default","dataSource"],["/repeat/item","Repeat","repeat","repeat",'{"instance":{"id":"products","src":"jr://commtrack:products"},"idsQuery":"instance(\'products\')/products/product/@id"}'],]);h.selectAll();o(k.copy(),[["id","type","labelItext:en-default","labelItext:hin-default","dataSource","instances"],["/repeat/item","Repeat","repeat","repeat",'{"idsQuery":"instance(\'products\')/products/product/@id"}','{"products":"jr://commtrack:products"}'],]);a(h.isTreeNodeValid("repeat/item"),h.getMessages("repeat/item"))});it("should paste and copy an Android App Callout",function(){h.loadXML("");e([["id","type","labelItext:en-default","labelItext:hin-default","intentXmlns","androidIntentAppId","androidIntentExtra","androidIntentResponse","unknownAttributes"],["/app","AndroidIntent","app","app","commcare.org/xforms","app-id",JSON.stringify({key1:"val1",key2:"val2"}),JSON.stringify({key3:"val3"}),JSON.stringify({type:"robin"})]]);h.selectAll();o(k.copy(),[["id","type","labelItext:en-default","labelItext:hin-default","androidIntentAppId","androidIntentExtra","androidIntentResponse","intentXmlns","unknownAttributes"],["/app","AndroidIntent","app","app","app-id",JSON.stringify({key1:"val1",key2:"val2"}),JSON.stringify({key3:"val3"}),"commcare.org/xforms",JSON.stringify({type:"robin"})]]);var q=h.getMug("app").messages.get();g.expect(q[0]).to.include("works on Android devices");a.equal(q.length,1,q)});it("should paste and copy an Android App Callout (old format)",function(){h.loadXML("");e([["id","type","labelItext:en-default","labelItext:hin-default","intent"],["/app","AndroidIntent","app","app",JSON.stringify({path:"app-id",xmlns:"commcare.org/xforms",extra:{key1:"val1",key2:"val2"},response:{key3:"val3"},unknownAttributes:{type:"robin"}})]]);h.selectAll();o(k.copy(),[["id","type","labelItext:en-default","labelItext:hin-default","androidIntentAppId","androidIntentExtra","androidIntentResponse","intentXmlns","unknownAttributes"],["/app","AndroidIntent","app","app","app-id",JSON.stringify({key1:"val1",key2:"val2"}),JSON.stringify({key3:"val3"}),"commcare.org/xforms",JSON.stringify({type:"robin"})]]);var q=h.getMug("app").messages.get();g.expect(q[0]).to.include("works on Android devices");a.equal(q.length,1,q)});it("should paste and copy a Balance",function(){h.loadXML("");e([["id","type","entityId","entryId","quantity","sectionId"],["/bal","Balance","/case","/product","/qty","/balance-id"],]);h.loadXML(p("createXML"));h.selectAll();o(k.copy(),[["id","type","entityId","entryId","quantity","rawDataAttributes","sectionId"],["/bal","Balance","/case","/product","/qty",'{"entity-id":"","date":""}',"/balance-id"],]);var q="balance[@type='bal']";a(h.isTreeNodeValid(q),h.getMessages(q))});it("should paste and copy a Transfer",function(){h.loadXML("");e([["id","type","dest","entryId","quantity","sectionId","src"],["/tx","Transfer","/dst","/product","/qty","/balance","/src"],]);h.loadXML(p("createXML"));h.selectAll();o(k.copy(),[["id","type","dest","entryId","quantity","rawDataAttributes","sectionId","src"],["/tx","Transfer","/dst","/product","/qty",'{"date":"","src":"","dest":""}',"/balance","/src"],]);var q="transfer[@type='tx']";a(h.isTreeNodeValid(q),h.getMessages(q))});it("should not overwrite manually typed question ID with copy-N-of-...",function(){h.loadXML("");e([["id","type","labelItext:en-default"],["/text","Text","text"],["/text","Text","text"],]);var q=f("[name=property-nodeID]");q.val("other").change();a.equal(q.val(),"other")});describe("with multimedia",function(){before(function(q){h.init({javaRosa:{langs:["en"]},uploader:{objectMap:{"jr://file/commcare/audio/data/question1.mp3":true}},core:{onReady:function(){a(this.isPluginEnabled("copyPaste"),"copyPaste plugin should be enabled");q()}}})});it("should not show warning on paste existing multimedia",function(){h.loadXML("");e([["id","type","labelItext:en-audio"],["/text","Text","jr://file/commcare/audio/data/question1.mp3"],]);var q=h.getMessages("text");a(!q,q)})})});describe("The copy-paste string conversions should",function(){function q(t,r){var s=JSON.stringify(t),u=JSON.stringify(r);it("stringify("+s+") -> "+u,function(){a.deepEqual(k.stringify(t),r)});it(" valuify("+u+") -> "+s,function(){a.deepEqual(k.valuify(r),t)})}q(null,"null");q(true,"true");q(false,"false");q("null",'"null"');q("true",'"true"');q("false",'"false"');q([],"[]");q({},"{}");q("","");q("x","x");q('"','"');q("[\n]",'"[\\n]"');q("{\n}",'"{\\n}"');q('"\n"','"\\"\\n\\""');q(0,"0");q(1,"1");q(350,"350");q(0.5,"0.5");q(-1.2e-10,"-1.2e-10");q("0",'"0"');q("1",'"1"');q("350",'"350"');q("0.5",'"0.5"');q("-1.2e-10",'"-1.2e-10"');(function(r){q(r,r)})();q("{1} ","{1} ");q("{1} {2}",'"{1} {2}"');q("[1] [2]",'"[1] [2]"');q("01",'"01"')})});